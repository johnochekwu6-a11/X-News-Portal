<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>X-News Portal</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif;}
body{background:#f4f6f8;color:#333;}
.navbar{background:#1DA1F2;color:white;display:flex;align-items:center;justify-content:space-between;padding:15px 20px;position:sticky;top:0;z-index:100;}
.navbar h1{cursor:pointer;}
.navbar nav{position:relative;}
.navbar nav .dropdown{position:relative; display:inline-block;}
.navbar nav .dropbtn{color:white;background:none;border:none;font-size:16px;cursor:pointer;font-weight:bold;}
.navbar nav .dropdown-content{display:none;position:absolute;background:white;min-width:150px;right:0;box-shadow:0px 8px 16px rgba(0,0,0,0.2);}
.navbar nav .dropdown-content a{color:#333;padding:10px 15px;text-decoration:none;display:block;}
.navbar nav .dropdown-content a:hover{background:#f1f1f1;}
.navbar nav .dropdown:hover .dropdown-content{display:block;}
.page{display:none;padding:20px;}
.page.active{display:block;}
input, textarea, button, select{padding:10px;margin:5px 0;border-radius:5px;border:1px solid #ccc;width:100%;}
button{cursor:pointer;background:#1DA1F2;color:white;border:none;}
textarea{resize:vertical;}
.article-card{background:white;border-radius:8px;box-shadow:0 3px 8px rgba(0,0,0,0.1);padding:10px;margin-bottom:10px;}
.article-card:hover{transform:translateY(-2px);}
.dashboard-tabs{display:flex;gap:5px;margin-bottom:10px;flex-wrap:wrap;}
.dashboard-tabs button{flex:1; min-width:100px;}
.tabContent{display:none;}
.tabContent.active{display:block;}
.hamburger{font-size:25px;cursor:pointer;}
.admin-menu{display:none;position:absolute;top:60px;left:0;background:#1DA1F2;color:white;width:200px;box-shadow:2px 2px 10px rgba(0,0,0,0.2);}
.admin-menu button{width:100%;padding:10px;border:none;background:none;text-align:left;cursor:pointer;color:white;font-weight:bold;}
.admin-menu button:hover{background:#0d8ddb;}
.mon-box{background:white;padding:10px;margin-top:10px;border-radius:5px;box-shadow:0 2px 5px rgba(0,0,0,0.1);}
</style>
</head>
<body>

<div class="navbar">
    <h1 onclick="openPage('home')">X-News</h1>
    <nav id="navLinks">
        <div class="dropdown" id="authorDropdown">
            <button class="dropbtn">Author ▼</button>
            <div class="dropdown-content">
                <a onclick="openPage('signupCreator')">Become an Author</a>
                <a onclick="openPage('loginPage')">Login</a>
            </div>
        </div>
        <span id="hamburgerIcon" class="hamburger" onclick="toggleAdminMenu()">☰</span>
        <div id="adminMenu" class="admin-menu"></div>
    </nav>
</div>

<!-- Home Page -->
<div id="home" class="page active">
    <h2>Published Articles</h2>
    <input type="text" id="searchInput" placeholder="Search authors by username" oninput="searchArticles()">
    <div id="articlesSection"></div>
</div>

<!-- Signup Page -->
<div id="signupCreator" class="page">
    <h2>Become an Author</h2>
    <input id="creatorUsername" placeholder="Username">
    <input id="creatorEmail" placeholder="Email">
    <input id="creatorPassword" type="password" placeholder="Password">
    <button onclick="signupCreator()">Sign Up</button>
</div>

<!-- Login Page -->
<div id="loginPage" class="page">
    <h2>Login</h2>
    <input id="loginEmail" placeholder="Email">
    <input id="loginPassword" type="password" placeholder="Password">
    <button onclick="loginUser()">Login</button>
</div>

<!-- Creator Dashboard -->
<div id="dashboard" class="page">
    <h2>Creator Dashboard - <span id="creatorName"></span></h2>
    <div class="dashboard-tabs">
        <button onclick="showTab('createTab')">Create</button>
        <button onclick="showTab('publishedTab')">Published</button>
        <button onclick="showTab('monetizationTab')">Monetization</button>
    </div>

    <div id="createTab" class="tabContent">
        <h3>Create New Article</h3>
        <input id="articleTitle" placeholder="Title">
        <textarea id="articleContent" placeholder="Content"></textarea>
        <button onclick="createArticle()">Publish Article</button>
    </div>

    <div id="publishedTab" class="tabContent">
        <h3>Your Articles</h3>
        <div id="creatorArticles"></div>
    </div>

    <div id="monetizationTab" class="tabContent">
        <h3>Monetization</h3>
        <div class="mon-box">Total Income: ₦<span id="totalIncome">0</span></div>
        <div class="mon-box">This Month Income: ₦<span id="monthIncome">0</span></div>
        <div class="mon-box">Articles Income: ₦<span id="articlesIncome">0</span></div>
    </div>
</div>

<!-- Admin Dashboard -->
<div id="adminDashboard" class="page" style="background:#1DA1F2;color:white;padding:20px;">
    <h2>Admin Dashboard</h2>
    <div class="tabContent active">
        <p>Use the ☰ menu to navigate between sections.</p>
    </div>
    <div id="adminContent"></div>
</div>

<footer>
    <p>&copy; 2026 X-News Portal</p>
</footer>

<script>
let users=JSON.parse(localStorage.getItem('users'))||[];
let articles=JSON.parse(localStorage.getItem('articles'))||[];
let loggedInUser=null;

// NAVIGATION
function openPage(id){
    document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    if(id==='home'){displayArticles();}
}

// SIGNUP
function signupCreator(){
    let username=document.getElementById('creatorUsername').value.trim();
    let email=document.getElementById('creatorEmail').value.trim();
    let password=document.getElementById('creatorPassword').value;
    if(!username||!email||!password){alert('All fields required');return;}
    if(users.find(u=>u.email===email)){alert('Email exists');return;}
    users.push({username,email,password,creator:true,status:'pending',followers:[],likes:[],articles:[]});
    localStorage.setItem('users',JSON.stringify(users));
    loggedInUser=username;
    alert('Signed up! Waiting for admin approval.');
    document.getElementById('authorDropdown').style.display='none';
    openPage('home');
}

// LOGIN
function loginUser(){
    let email=document.getElementById('loginEmail').value;
    let password=document.getElementById('loginPassword').value;
    let user=users.find(u=>u.email===email && u.password===password);
    if(!user){alert('Invalid credentials'); return;}
    loggedInUser=user.username;
    if(user.email==='maduekefelix76@gmail.com'){openPage('adminDashboard'); setupAdminMenu();}
    else if(user.creator && user.status==='active'){openPage('dashboard'); document.getElementById('creatorName').innerText=user.username; showTab('createTab'); document.getElementById('authorDropdown').style.display='none'; displayCreatorArticles();}
    else{alert('Waiting for admin approval'); openPage('home');}
}

// DASHBOARD TABS
function showTab(tab){
    document.querySelectorAll('.tabContent').forEach(t=>t.classList.remove('active'));
    document.getElementById(tab).classList.add('active');
}

// CREATE ARTICLE
function createArticle(){
    let title=document.getElementById('articleTitle').value.trim();
    let content=document.getElementById('articleContent').value.trim();
    if(!title||!content){alert('Title & content required');return;}
    let article={title,content,author:loggedInUser,status:'pending',clicks:0,shares:0,comments:0,reach:0};
    articles.push(article);
    localStorage.setItem('articles',JSON.stringify(articles));
    alert('Article submitted! Waiting for approval.');
    document.getElementById('articleTitle').value=''; document.getElementById('articleContent').value='';
    displayCreatorArticles();
}

// DISPLAY ARTICLES
function displayArticles(){
    let container=document.getElementById('articlesSection');
    container.innerHTML='';
    articles.filter(a=>a.status==='approved').forEach(a=>{
        let div=document.createElement('div');
        div.className='article-card';
        div.innerHTML=`<h3>${a.title}</h3><p>${a.content}</p><span>Author: ${a.author} | Reach: ${a.reach}</span>`;
        container.appendChild(div);
    });
}

// CREATOR ARTICLES
function displayCreatorArticles(){
    let container=document.getElementById('creatorArticles');
    container.innerHTML='';
    articles.filter(a=>a.author===loggedInUser).forEach(a=>{
        let div=document.createElement('div');
        div.className='article-card';
        div.innerHTML=`<h3>${a.title} - [${a.status}]</h3><p>${a.content}</p><span>Reach: ${a.reach}</span>`;
        container.appendChild(div);
    });
}

// SEARCH
function searchArticles(){
    let q=document.getElementById('searchInput').value.toLowerCase();
    let container=document.getElementById('articlesSection');
    container.innerHTML='';
    articles.filter(a=>a.status==='approved' && a.author.toLowerCase().includes(q)).forEach(a=>{
        let div=document.createElement('div');
        div.className='article-card';
        div.innerHTML=`<h3>${a.title}</h3><p>${a.content}</p><span>Author: ${a.author} | Reach: ${a.reach}</span>`;
        container.appendChild(div);
    });
}

// ADMIN MENU
function setupAdminMenu(){
    let menu=document.getElementById('adminMenu');
    menu.style.display='block';
    menu.innerHTML='';
    const sections=['Published','Pending','Rejected','Drafts','Authors','Monetization','Settings'];
    sections.forEach(sec=>{
        let btn=document.createElement('button');
        btn.innerText=sec;
        btn.onclick=()=>displayAdminSection(sec);
        menu.appendChild(btn);
    });
}

// TOGGLE ADMIN HAMBURGER
function toggleAdminMenu(){
    let menu=document.getElementById('adminMenu');
    menu.style.display=(menu.style.display==='block')?'none':'block';
}

// DISPLAY ADMIN SECTION
function displayAdminSection(section){
    let content=document.getElementById('adminContent');
    content.innerHTML=`<h3>${section}</h3>`;
    if(section==='Pending'){
        articles.filter(a=>a.status==='pending').forEach((a,i)=>{
            let div=document.createElement('div');
            div.className='article-card';
            div.innerHTML=`<h4>${a.title} by ${a.author}</h4>
            <p>${a.content}</p>
            <p>Reach: ${a.reach}</p>
            <button onclick="approveArticle(${i})">Approve</button>
            <button onclick="rejectArticle(${i})">Reject</button>
            <input type="number" placeholder="Set reach" id="reach${i}" style="width:80px;">
            <button onclick="setReach(${i})">Update Reach</button>`;
            content.appendChild(div);
        });
    } else if(section==='Authors'){
        users.filter(u=>u.creator).forEach(u=>{
            let div=document.createElement('div');
            div.className='article-card';
            div.innerHTML=`<p>${u.username} - Status: ${u.status}</p>`;
            content.appendChild(div);
        });
    } else {
        content.innerHTML+='<p>Functionality coming soon for '+section+'</p>';
    }
}

// ADMIN FUNCTIONS
function approveArticle(i){articles[i].status='approved'; localStorage.setItem('articles',JSON.stringify(articles)); displayAdminSection('Pending'); displayArticles();}
function rejectArticle(i){articles[i].status='rejected'; localStorage.setItem('articles',JSON.stringify(articles)); displayAdminSection('Pending'); displayCreatorArticles();}
function setReach(i){ let val=parseInt(document.getElementById('reach'+i).value); if(!isNaN(val)){articles[i].reach=val; localStorage.setItem('articles',JSON.stringify(articles)); displayAdminSection('Pending'); displayArticles();} }

</script>

</body>
</html>
